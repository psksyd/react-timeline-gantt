!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("moment"),require("react-sizeme")):"function"==typeof define&&define.amd?define("react-gantt-timeline",["React","moment","ReactDOM"],e):"object"==typeof exports?exports["react-gantt-timeline"]=e(require("react"),require("moment"),require("react-sizeme")):t["react-gantt-timeline"]=e(t.React,t.moment,t.ReactDOM)}(window,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){t.exports=n(6)()},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")});return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,u=0,l=[],p=n(10);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(g(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(g(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var a=u++;n=c||(c=m(e)),r=k.bind(null,n,a,!1),o=k.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=p(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}t&&f(d(t,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var v,w=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function k(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e){t.exports=n},function(t,e,n){"use strict";var r=n(7);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".header-top {\r\n  height: 20px;\r\n\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n\r\n.header-middle {\r\n  height: 20px;\r\n  background-color: chocolate;\r\n  color: white;\r\n  font-size: 10px;\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n.header-bottom {\r\n  height: 20px;\r\n  font-size: 10px;\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n",""]),t.exports=e},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r=n(12);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".timeLine {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: solid 1px rgb(207, 207, 205);\r\n  font-size: 12px;\r\n  user-select: none;\r\n  -moz-user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n}\r\n\r\n/* Main Area */\r\n\r\n.timeLine-main {\r\n  flex: 1 1 100%;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: hidden;\r\n}\r\n/* Main Area Header*/\r\n\r\n.timeLine-main-header-viewPort {\r\n  flex: 0 0 60px;\r\n  position: relative;\r\n  height: 60px;\r\n  width: 100%;\r\n  background-color: rgb(112, 112, 112);\r\n  overflow: hidden;\r\n}\r\n\r\n.timeLine-main-header-container {\r\n  flex: 0 0 60px;\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #333333;\r\n  overflow: hidden;\r\n  user-select: none;\r\n}\r\n\r\n.timeLine-main-header-day-item {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  background-color: rgb(112, 112, 112);\r\n  font-size: 10px;\r\n  text-align: center;\r\n  border-right: solid 1px;\r\n  border-top: solid 1px;\r\n  border-bottom: solid 1px;\r\n  top: 20px;\r\n  height: 40px;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.timeLine-main-header-top-item {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  border-right: solid 1px white;\r\n  height: 20px;\r\n  z-index: 91;\r\n}\r\n\r\n.timeLine-main-header-day-week {\r\n  flex: 0 0 12px;\r\n  padding: 4px;\r\n  z-index: 90;\r\n}\r\n\r\n.timeLine-main-header-day-month {\r\n  top: 0px;\r\n  position: sticky;\r\n  flex: 0 0 15px;\r\n  padding: 5px;\r\n  z-index: 90;\r\n}\r\n\r\n.timeLine-main-header-time {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: stretch;\r\n  height: 22px;\r\n  justify-content: stretch;\r\n}\r\n\r\n.timeLine-main-header-time-item {\r\n  border-left: solid 1px silver;\r\n  border-bottom: solid 1px silver;\r\n  border-top: solid 1px silver;\r\n  text-align: center;\r\n  padding-top: 5px;\r\n}\r\n/* Main Area Data*/\r\n\r\n.timeLine-main-data-viewPort {\r\n  flex: 1 1 auto;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background-color: #fbf9f9;\r\n}\r\n.timeLine-main-data-container {\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: rgb(255, 255, 255);\r\n}\r\n\r\n.timeLine-main-data-row {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 50px;\r\n}\r\n\r\n.timeLine-main-data-task {\r\n  position: absolute;\r\n  background-color: darkorchid;\r\n  border-radius: 14px;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.timeLine-main-data-task-side {\r\n  position: absolute;\r\n  width: 10px;\r\n  cursor: col-resize;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.timeLine-main-data-task-side-linker {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 4px;\r\n  cursor: default;\r\n  z-index: 100;\r\n}\r\n.timeLine-main-data-task-side-linker:hover {\r\n  background-color: black;\r\n  border: solid 0.5px grey;\r\n}\r\n/* .timeLine-main-data-task:hover {\r\n    background-color:chocolate;\r\n    border:solid 2px darkorchid;\r\n    cursor: move;\r\n} */\r\n\r\n.timeLine-main-data-verticalLine {\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  width: 24px;\r\n  background-color: white;\r\n  border-left-width: 0.5px;\r\n  border-left-color: rgb(207, 207, 205);\r\n  border-left-style: dashed;\r\n}\r\n\r\n/* Side Area */\r\n\r\n.timeLine-side-main {\r\n  flex: 0 0 auto;\r\n  width: 108px;\r\n  min-width: 108px;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.timeLine-side {\r\n  flex: 1 0 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-right: solid 1px rgb(207, 207, 205);\r\n}\r\n\r\n.verticalResizer {\r\n  flex: 0 0 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: col-resize;\r\n  border-right: solid 1px rgb(207, 207, 205);\r\n  height: 100%;\r\n}\r\n.squareGrip {\r\n  flex: 0 0 auto;\r\n\r\n  border-radius: 50%;\r\n  height: 5px;\r\n  width: 5px;\r\n  margin: 3px 0;\r\n}\r\n\r\n.timeLine-side-title {\r\n  flex: 0 0 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.timeLine-side-task-viewPort {\r\n  position: relative;\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  background-color: #fbf9f9;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n}\r\n\r\n.timeLine-side-task-container {\r\n  position: relative;\r\n  overflow-x: hidden;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.timeLine-side-task-row {\r\n  position: absolute;\r\n  width: 100%;\r\n  background-color: rgb(112, 112, 112);\r\n  border-bottom-width: 0.5px;\r\n  border-bottom-color: rgb(207, 207, 205);\r\n  border-bottom-style: solid;\r\n  height: 30px;\r\n  color: grey;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  outline: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n",""]),t.exports=e},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(2),a=n.n(i);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c={header:{top:{style:{backgroundColor:"#333333",fontSize:10,color:"white",textAlign:"center"}},middle:{style:{backgroundColor:"chocolate"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}},bottom:{style:{background:"grey",color:"white",fontSize:9},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}}},taskList:{title:{label:"Projects",style:{backgroundColor:"#333333",borderBottom:"solid 1px silver",color:"white",textAlign:"center"}},task:{style:{backgroundColor:"#fbf9f9"}},verticalSeparator:{style:{backgroundColor:"#333333"},grip:{style:{backgroundColor:"#cfcfcd"}}}},dataViewPort:{rows:{style:{backgroundColor:"#fbf9f9",borderBottom:"solid 0.5px #cfcfcd"}},task:{showLabel:!1,style:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",backgroundColor:"grey"},selectedStyle:{position:"absolute",borderRadius:14,border:"solid 1px #ff00fa",color:"white",textAlign:"center",backgroundColor:"grey"}}},links:{color:"black",selectedColor:"#ff00fa"}},u=new(function(){function t(){var e,n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(t){o.data={},t?o.populate(t,c,o.data):o.data=c},(n="load")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.data=c}var e,n,r;return e=t,(n=[{key:"populate",value:function(t,e,n){if(this.isObject(e))for(var r in e)t[r]?(n[r]=t[r],this.populate(t[r],e[r],n[r])):n[r]=e[r]}},{key:"isObject",value:function(t){return"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t}},{key:"values",get:function(){return this.data}}])&&s(e.prototype,n),r&&s(e,r),t}());function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;return h(t)}(this,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,r["Component"]);var e,n,i,a=d(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).doMouseMove=e.doMouseMove.bind(h(e)),e.doMouseDown=e.doMouseDown.bind(h(e)),e.doMouseUp=e.doMouseUp.bind(h(e)),e.state={dragging:!1},e}return e=s,(n=[{key:"doMouseDown",value:function(t){0===t.button&&(this.draggingPosition=t.clientX,this.setState({dragging:!0}))}},{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp))}},{key:"doMouseMove",value:function(t){if(this.state.dragging){t.stopPropagation();var e=this.draggingPosition-t.clientX;this.draggingPosition=t.clientX,this.props.onTaskListSizing(e)}}},{key:"doMouseUp",value:function(t){this.setState({dragging:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"verticalResizer",style:u.values.taskList.verticalSeparator.style,onMouseDown:this.doMouseDown},o.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}))}}])&&p(e.prototype,n),i&&p(e,i),s}(),b=n(1),g=n.n(b),v=0,w=30,k=5e3,x="day",S="week",O="month",T="year";function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,"dayToPosition",function(t,e,n){return t*n+e}),E(this,"daysInYear",function(t){return e.isLeapYear(t)?366:365})}var e,n,r;return e=t,(n=[{key:"dateToPixel",value:function(t,e,n){var r=this.getToday(),o=new Date(t),i=60*(o.getTimezoneOffset()-r.getTimezoneOffset())*1e3;return(o.getTime()-r.getTime()-i)/36e5*(n/24)+e}},{key:"pixelToDate",value:function(t,e,n){var r=24/n,o=t-e,i=this.getToday(),a=i.getTime()+o*r*36e5,s=new Date(a),c=60*(s.getTimezoneOffset()-i.getTimezoneOffset())*1e3;return s.setTime(s.getTime()+c),s}},{key:"getToday",value:function(){var t=new Date;return t.setHours(0,0,0,0),t}},{key:"monthDiff",value:function(t,e){return Math.abs(e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()))}},{key:"daysInMonth",value:function(t,e){return new Date(e,t,0).getDate()}},{key:"isLeapYear",value:function(t){return t%400==0||t%100!=0&&t%4==0}}])&&P(e.prototype,n),r&&P(e,r),t}());n(8);function L(t){"@babel/helpers - typeof";return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach(function(e){M(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function U(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=F(t);if(e){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;return W(t)}(this,n)}}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){U(n,r["PureComponent"]);var e=N(n);function n(t){return D(this,n),e.call(this,t)}return I(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px white",position:"absolute",height:20,left:this.props.left,width:this.props.width}},o.a.createElement("div",null,this.props.label))}}]),n}(),A=function(t){U(n,r["PureComponent"]);var e=N(n);function n(t){var r;return D(this,n),M(W(r=e.call(this,t)),"getStartDate",function(t,e){var n=null;switch(e){case"year":return n=t.year(),g()([n,0,1]);case"month":n=t.year();var r=t.month();return g()([n,r,1]);case"week":return t.subtract(t.day(),"days");default:return t}}),M(W(r),"renderTime",function(t,e,n,r){for(var i=[],a=e/24,s=0,c=0;c<24;c++)i.push(o.a.createElement(V,{key:c,left:s,width:a,label:"shorttime"==n?c:"".concat(c,":00")})),s+=a;return o.a.createElement("div",{key:r,style:{position:"absolute",height:20,left:t,width:e}}," ",i)}),M(W(r),"renderHeaderRows",function(t,e,n){for(var i={top:[],middle:[],bottom:[]},a={},s="",c="",l="",p=null,f=null,d=r.props.currentday,h=r.props.currentday+r.props.numVisibleDays,y=d-w;y<h+w;y++)s!=(p=g()().locale("sv").add(y,"days")).format(r.getFormat(t,"top"))&&(s=p.format(r.getFormat(t,"top")),f=r.getBox(p,t,a.top),a.top=f.left+f.width,i.top.push(o.a.createElement(V,{key:y,left:f.left,width:f.width,label:s}))),c!=p.format(r.getFormat(e))&&(c=p.format(r.getFormat(e)),f=r.getBox(p,e,a.middle),a.middle=f.left+f.width,i.middle.push(o.a.createElement(V,{key:y,left:f.left,width:f.width,label:c}))),l!=p.format(r.getFormat(n))&&(l=p.format(r.getFormat(n)),f=r.getBox(p,n,a.bottom),a.bottom=f.left+f.width,"shorttime"==n||"fulltime"==n?i.bottom.push(r.renderTime(f.left,f.width,n,y)):i.bottom.push(o.a.createElement(V,{key:y,left:f.left,width:f.width,label:l})));return o.a.createElement("div",{className:"timeLine-main-header-container",style:{width:k,maxWidth:k}},o.a.createElement("div",{className:"header-top",style:R({},u.values.header.top.style)},i.top),o.a.createElement("div",{className:"header-middle",style:R({},u.values.header.middle.style)},i.middle),o.a.createElement("div",{className:"header-bottom",style:R({},u.values.header.bottom.style)},i.bottom))}),M(W(r),"renderHeader",function(){switch(r.props.mode){case x:return r.renderHeaderRows("week","dayweek","fulltime");case S:return r.renderHeaderRows("week","dayweek","shorttime");case O:return r.renderHeaderRows("month","dayweek","daymonth");case T:return r.renderHeaderRows("year","month","week")}}),M(W(r),"setBoundaries",function(){r.start=r.props.currentday-w,r.end=r.props.currentday+r.props.numVisibleDays+w}),M(W(r),"needToRender",function(){return r.props.currentday<r.start||r.props.currentday+r.props.numVisibleDays>r.end}),r.setBoundaries(),r}return I(n,[{key:"getFormat",value:function(t,e){switch(t){case"year":return"YYYY";case"month":return"top"==e?"MMMM YYYY":"MMMM";case"week":return"top"==e?"ww MMMM YYYY":"ww";case"dayweek":return"dd";case"daymonth":return"D"}}},{key:"getModeIncrement",value:function(t,e){switch(e){case"year":return j.daysInYear(t.year());case"month":return t.daysInMonth();case"week":return 7;default:return 1}}},{key:"getBox",value:function(t,e,n){var r=this.getModeIncrement(t,e)*this.props.dayWidth;if(!n){var o=this.getStartDate(t,e);o=o.startOf("day");var i=g()().startOf("day"),a=o.diff(i,"days");n=j.dayToPosition(a,this.props.nowposition,this.props.dayWidth)}return{left:n,width:r}}},{key:"render",value:function(){return this.refs.Header&&(this.refs.Header.scrollLeft=this.props.scrollLeft),o.a.createElement("div",{id:"timeline-header",ref:"Header",className:"timeLine-main-header-viewPort"},this.renderHeader())}}]),n}();function H(t){"@babel/helpers - typeof";return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach(function(e){K(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=J(t);if(e){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;return $(t)}(this,n)}}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(s,r["Component"]);var e,n,i,a=G(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),K($(e=a.call(this,t)),"onCreateLinkMouseDown",function(t,n){0===t.button&&(t.stopPropagation(),e.props.onStartCreateLink(e.props.item,n))}),K($(e),"onCreateLinkMouseUp",function(t,n){t.stopPropagation(),e.props.onFinishCreateLink(e.props.item,n)}),K($(e),"onCreateLinkTouchStart",function(t,n){t.stopPropagation(),e.props.onStartCreateLink(e.props.item,n)}),K($(e),"onCreateLinkTouchEnd",function(t,n){t.stopPropagation(),e.props.onFinishCreateLink(e.props.item,n)}),K($(e),"doMouseDown",function(t,n){e.props.onUpdateTask&&0===t.button&&(t.stopPropagation(),e.dragStart(t.clientX,n))}),K($(e),"doMouseMove",function(t){e.state.dragging&&(t.stopPropagation(),e.dragProcess(t.clientX))}),K($(e),"doMouseUp",function(){e.dragEnd()}),K($(e),"doTouchStart",function(t,n){e.props.onUpdateTask&&(t.stopPropagation(),e.dragStart(t.touches[0].clientX,n))}),K($(e),"doTouchMove",function(t){e.state.dragging&&(t.stopPropagation(),e.dragProcess(t.changedTouches[0].clientX))}),K($(e),"doTouchEnd",function(t){e.dragEnd()}),K($(e),"displayTooltip",function(){return document.getElementById(e.props.item._id)?o.a.createElement("div",{style:{width:"300px",border:"1px solid gray",backgroundColor:"#FFFFFF",color:"#676767",textAlign:"center",borderRadius:"6px",padding:"10px",position:"absolute",zIndex:9999,bottom:"-100px",left:"105%"}},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 10px 5px 10px"}},o.a.createElement("span",null,"Namn : "),o.a.createElement("span",null,e.props.item.displayName)),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 10px 5px 10px"}},o.a.createElement("span",null,"Start-Slut: "),o.a.createElement("span",null,"".concat(new Date(e.props.item.start).toLocaleDateString("en-ca")," - ").concat(new Date(e.props.item.end).toLocaleDateString("en-ca")))),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 10px 5px 10px"}},o.a.createElement("span",null,"Fas :"),o.a.createElement("span",null,e.props.item.phase)),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 10px 5px 10px"}},o.a.createElement("span",null,"Personer :"),o.a.createElement("span",{style:{display:"flex",flexFlow:"column"}},e.props.item._readers&&Object.values(e.props.item._readers).map(function(t){return o.a.createElement("span",{style:{textAlign:"end"}},t.name)}))))):null}),e.calculateStyle=e.calculateStyle.bind($(e)),e.state={dragging:!1,left:e.props.left,width:e.props.width,mode:v,showHover:!1},e}return e=s,(n=[{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp),document.addEventListener("touchmove",this.doTouchMove),document.addEventListener("touchend",this.doTouchEnd)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp),document.removeEventListener("touchmove",this.doTouchMove),document.removeEventListener("touchend",this.doTouchEnd))}},{key:"dragStart",value:function(t,e){this.props.onChildDrag(!0),this.draggingPosition=t,this.setState({dragging:!0,mode:e,left:this.props.left,width:this.props.width})}},{key:"dragProcess",value:function(t){var e=this.draggingPosition-t,n=this.state.left,r=this.state.width;switch(this.state.mode){case 1:n=this.state.left-e;break;case 2:n=this.state.left-e,r=this.state.width+e;break;case 3:r=this.state.width-e}var o={item:this.props.item,position:{start:n-this.props.nowposition,end:n+r-this.props.nowposition}};this.props.onTaskChanging(o),this.setState({left:n,width:r}),this.draggingPosition=t}},{key:"dragEnd",value:function(){this.props.onChildDrag(!1);var t=j.pixelToDate(this.state.left,this.props.nowposition,this.props.dayWidth),e=j.pixelToDate(this.state.left+this.state.width,this.props.nowposition,this.props.dayWidth);this.props.onUpdateTask(this.props.item,{start:t,end:e}),this.setState({dragging:!1,mode:v})}},{key:"calculateStyle",value:function(){var t=this.props.isSelected?u.values.dataViewPort.task.selectedStyle:u.values.dataViewPort.task.style,e=this.props.color?this.props.color:t.backgroundColor;return this.state.dragging?B(B({},t),{},{backgroundColor:e,left:this.state.left,width:this.state.width,height:this.props.height-5,top:2}):B(B({},t),{},{backgroundColor:e,left:this.props.left,width:this.props.width,height:this.props.height-5,top:2})}},{key:"render",value:function(){var t=this,e=this.calculateStyle();return this.props.item._id===this.props.stickyRow&&(e.border="2px solid darkblue"),o.a.createElement("div",{id:this.props.item._id,onMouseEnter:function(){return t.setState({showHover:!0})},onMouseLeave:function(){return t.setState({showHover:!1})},onMouseDown:function(e){return t.props.setStickyRow(t.props.item._id),t.doMouseDown(e,1)},onTouchStart:function(e){return t.doTouchStart(e,1)},onClick:function(e){t.props.onSelectItem(t.props.item)},style:e},(this.state.showHover||this.props.stickyRow==this.props.item._id)&&this.displayTooltip(),o.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:-4,height:e.height},onMouseDown:function(e){return t.doMouseDown(e,2)},onTouchStart:function(e){return t.doTouchStart(e,2)}},o.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseUp:function(e){return t.onCreateLinkMouseUp(e,void 0)},onTouchEnd:function(e){return t.onCreateLinkTouchEnd(e,void 0)}})),o.a.createElement("div",{style:{overflow:"hidden"}},u.values.dataViewPort.task.showLabel?this.props.item.name:""),o.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:e.width-3,height:e.height},onMouseDown:function(e){return t.doMouseDown(e,3)},onTouchStart:function(e){return t.doTouchStart(e,3)}},o.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseDown:function(e){return t.onCreateLinkMouseDown(e,void 0)},onTouchStart:function(e){return t.onCreateLinkTouchStart(e,void 0)}})))}}])&&X(e.prototype,n),i&&X(e,i),s}(),Z=n(5),tt=n.n(Z);function et(t){"@babel/helpers - typeof";return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach(function(e){ot(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e,n){return e&&at(t.prototype,e),n&&at(t,n),t}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;return pt(t)}(this,n)}}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){ct(n,r["Component"]);var e=lt(n);function n(t){return it(this,n),e.call(this,t)}return st(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"timeLine-main-data-row",style:rt(rt({},u.values.dataViewPort.rows.style),{},{top:this.props.top,height:this.props.itemheight})},this.props.children)}}]),n}(),ht=function(t){ct(n,r["Component"]);var e=lt(n);function n(t){var r;return it(this,n),ot(pt(r=e.call(this,t)),"onChildDrag",function(t){r.childDragging=t}),ot(pt(r),"renderRows",function(){for(var t=[],e=r.props.startRow;e<r.props.endRow+1;e++){var n=r.props.data[e];if(!n)break;var i=j.dateToPixel(n.start,r.props.nowposition,r.props.dayWidth),a=j.dateToPixel(n.end,r.props.nowposition,r.props.dayWidth)-i;t.push(o.a.createElement(dt,{key:e,label:n.name,top:e*r.props.itemheight,left:20,itemheight:r.props.itemheight},o.a.createElement(Q,{setStickyRow:r.props.setStickyRow,stickyRow:r.props.stickyRow,item:n,label:n.name,nowposition:r.props.nowposition,dayWidth:r.props.dayWidth,color:n.color,left:i,width:a,height:r.props.itemheight,onChildDrag:r.onChildDrag,isSelected:r.props.selectedItem==n,onSelectItem:r.props.onSelectItem,onStartCreateLink:r.props.onStartCreateLink,onFinishCreateLink:r.props.onFinishCreateLink,onTaskChanging:r.props.onTaskChanging,onUpdateTask:r.props.onUpdateTask}," ")))}return t}),ot(pt(r),"doMouseDown",function(t){0!==t.button||r.childDragging||r.props.onMouseDown(t)}),ot(pt(r),"doMouseMove",function(t){r.props.onMouseMove(t,r.refs.dataViewPort)}),ot(pt(r),"doTouchStart",function(t){r.childDragging||r.props.onTouchStart(t)}),ot(pt(r),"doTouchMove",function(t){r.props.onTouchMove(t,r.refs.dataViewPort)}),r.childDragging=!1,r}return st(n,[{key:"getContainerHeight",value:function(t){return t>0?t*this.props.itemheight:10}},{key:"componentDidMount",value:function(){this.refs.dataViewPort.scrollLeft=0}},{key:"render",value:function(){this.refs.dataViewPort&&(this.refs.dataViewPort.scrollLeft=this.props.scrollLeft,this.refs.dataViewPort.scrollTop=this.props.scrollTop);var t=this.getContainerHeight(this.props.data.length);return o.a.createElement("div",{ref:"dataViewPort",id:"timeLinedataViewPort",className:"timeLine-main-data-viewPort",onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.props.onMouseUp,onMouseLeave:this.props.onMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},o.a.createElement("div",{className:"timeLine-main-data-container",style:{height:t,width:k,maxWidth:k}},this.renderRows()))}}]),n}(),yt=tt()({monitorWidth:!0,monitorHeight:!0})(ht);function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.link={}}var e,n,r;return e=t,(n=[{key:"registerData",value:function(t){if(t){this.data={};for(var e=0;e<t.length;e++)this.data[t[e].id]={item:t[e],index:e}}}},{key:"registerLinks",value:function(t){if(t){this.link={};for(var e=0,n=0,r=0;r<t.length;r++){e=t[r].start,n=t[r].end;var o={link:t[r],index:r};this.createAddTo(e,this.link,o,r),this.createAddTo(n,this.link,o,r)}}}},{key:"createAddTo",value:function(t,e,n,r){e[t]||(e[t]=[]),-1==e[t].indexOf(n)&&e[t].push(n)}},{key:"getTask",value:function(t){return this.data[t]}},{key:"getLinks",value:function(t){return this.link[t]}}])&&mt(e.prototype,n),r&&mt(e,r),t}());function gt(t){"@babel/helpers - typeof";return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=St(t);if(e){var o=St(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;return xt(t)}(this,n)}}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt=20,Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(s,r["Component"]);var e,n,i,a=kt(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Ot(xt(e=a.call(this,t)),"calcNormCoordinates",function(){var t;return{cpt1:{x:t=e.props.start.x+(e.props.end.x-e.props.start.x)/2,y:e.props.start.y},cpt2:{x:t,y:e.props.end.y}}}),Ot(xt(e),"calcSCoordinates",function(){var t={x:e.props.start.x+Tt,y:e.props.start.y},n=(e.props.end.y-e.props.start.y)/2,r={x:t.x,y:t.y+n},o={x:e.props.end.x-Tt,y:r.y};return{cpt1:t,cpt2:r,cpt3:o,cpt4:{x:o.x,y:o.y+n}}}),Ot(xt(e),"getPath",function(){var t=null;return e.props.start.x>e.props.end.x?(t=e.calcSCoordinates(),"M".concat(e.props.start.x," ").concat(e.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(t.cpt3.x," ").concat(t.cpt3.y," ").concat(t.cpt4.x," ").concat(t.cpt4.y," ").concat(e.props.end.x," ").concat(e.props.end.y)):(t=e.calcNormCoordinates(),"M".concat(e.props.start.x," ").concat(e.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(e.props.end.x," ").concat(e.props.end.y))}),Ot(xt(e),"onSelect",function(t){e.props.onSelectItem&&e.props.onSelectItem(e.props.item)}),e}return e=s,(n=[{key:"render",value:function(){var t=this.props.isSelected?u.values.links.selectedColor:u.values.links.color;return o.a.createElement("g",{className:"timeline-link"},o.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:"white",d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"4",cursor:"pointer"}),o.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:t,d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"1",cursor:"pointer",markerEnd:"url(#arrow)"}))}}])&&vt(e.prototype,n),i&&vt(e,i),s}();function Et(t){"@babel/helpers - typeof";return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=Mt(t);if(e){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Et(e)||"function"==typeof e))return e;return Rt(t)}(this,n)}}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(s,r["Component"]);var e,n,i,a=Ct(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Dt(Rt(e=a.call(this,t)),"doMouseMove",function(t){e.init||(e.lastX=t.clientX,e.lastY=t.clientY,e.init=!0);var n=e.state.x+(t.clientX-e.lastX),r=e.state.y+(t.clientY-e.lastY);e.lastX=t.clientX,e.lastY=t.clientY,e.setState({x:n,y:r})}),Dt(Rt(e),"doMouseUp",function(t){e.props.onFinishCreateLink()}),e.state={x:e.props.start.x,y:e.props.start.y},e.init=!1,e.lastX=-1,e.lastY=-1,e}return e=s,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)}},{key:"render",value:function(){return o.a.createElement(Pt,{key:-1,start:{x:this.props.start.x,y:this.props.start.y},end:{x:this.state.x,y:this.state.y}})}}])&&jt(e.prototype,n),i&&jt(e,i),s}();function It(t){"@babel/helpers - typeof";return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t){return function(t){if(Array.isArray(t))return zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=At(t);if(e){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;return Vt(t)}(this,n)}}function Vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(s,r["Component"]);var e,n,i,a=Ft(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Ht(Vt(e=a.call(this,t)),"getItemPosition",function(t,n){return{x:j.dateToPixel(n,0,e.props.dayWidth),y:t*e.props.itemheight+e.props.itemheight/2}}),Ht(Vt(e),"renderCreateLink",function(){if(e.props.interactiveMode){var t=bt.getTask(e.props.taskToCreate.task.id),n=e.getItemPosition(t.index,t.item.end);return o.a.createElement(_t,{start:n,onFinishCreateLink:e.props.onFinishCreateLink})}}),Ht(Vt(e),"renderChangingTaskLinks",function(){if(e.props.changingTask!=e.state.changingTask){e.state.changingTask=e.props.changingTask;var t=bt.getLinks(e.state.changingTask.item.id);if(!t)return;for(var n=null,r=null,i=null,a={},s={},c=0;c<t.length;c++)n=t[c],(r=bt.getTask(n.link.start))&&(i=bt.getTask(n.link.end))&&(a=e.getItemPosition(r.index,r.item.end),e.state.changingTask.item.id==n.link.start&&(a.x=e.state.changingTask.position.end),s=e.getItemPosition(i.index,i.item.start),e.state.changingTask.item.id==n.link.end&&(s.x=e.state.changingTask.position.start),e.cache[n.index]=o.a.createElement(Pt,{key:-c-1,item:n,start:{x:a.x,y:a.y},end:{x:s.x,y:s.y},isSelected:e.props.selectedItem==n,onSelectItem:e.props.onSelectItem}),e.cache=Ut(e.cache))}}),e.cache=[],e.state={links:[],data:[],selectedItem:null},e}return e=s,(n=[{key:"renderLink",value:function(t,e,n,r){var i=this.getItemPosition(t.index,t.item.end),a=this.getItemPosition(e.index,e.item.start);return o.a.createElement(Pt,{key:r,item:n,start:{x:i.x,y:i.y},end:{x:a.x,y:a.y},isSelected:this.props.selectedItem==n,onSelectItem:this.props.onSelectItem})}},{key:"renderLinks",value:function(){this.cache=[];var t,e={},n={};if(0!=this.state.data.length)for(var r=0;r<this.state.links.length;r++){var o=this.state.links[r];!o&&e[o.id]||((t=bt.getTask(o.start))&&(n=bt.getTask(o.end))?(this.cache.push(this.renderLink(t,n,o,r)),e[o.id]=""):this.cache.push(null))}}},{key:"refreshData",value:function(){this.props.links==this.state.links&&this.props.data==this.state.data&&this.props.dayWidth==this.state.dayWidth&&this.props.selectedItem==this.state.selectedItem||(this.state.selectedItem=this.props.selectedItem,this.state.dayWidth=this.props.dayWidth,this.state.links=this.props.links,this.state.data=this.props.data,this.state.links&&this.state.data&&this.renderLinks())}},{key:"render",value:function(){return this.refreshData(),this.renderChangingTaskLinks(),o.a.createElement("svg",{x:0,y:0,width:"100%",pointerEvents:"none",style:{position:"absolute",top:60,userSelect:"none",height:"100%"}},o.a.createElement("defs",null,o.a.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"9",markerHeight:"9",orient:"auto-start-reverse"},o.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),o.a.createElement("g",{transform:"matrix(1,0,0,1,".concat(-(this.props.scrollLeft-this.props.nowposition),",").concat(-this.props.scrollTop,")")},this.cache,this.renderCreateLink()))}}])&&Nt(e.prototype,n),i&&Nt(e,i),s}();function Bt(t){"@babel/helpers - typeof";return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Bt(e)||"function"==typeof e))return e;return $t(t)}(this,n)}}function $t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(s,r["Component"]);var e,n,i,a=Gt(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Kt($t(e=a.call(this,t)),"onFocus",function(){e.setState({editing:!0})}),Kt($t(e),"onBlur",function(){e.finishEditing()}),Kt($t(e),"handleKey",function(t){13===(t.keyCode||t.which)&&e.finishEditing()}),Kt($t(e),"finishEditing",function(){e.isFocus=!1,e.setState({editing:!1}),e.props.onChange&&e.props.onChange(e.state.value)}),Kt($t(e),"handleChange",function(t){e.setState({value:t.target.value})}),Kt($t(e),"renderDiv",function(){return o.a.createElement("div",{tabIndex:e.props.index,onClick:e.onFocus,onFocus:e.onFocus,style:{width:"100%"}}," ",e.state.value)}),Kt($t(e),"renderEditor",function(){return o.a.createElement("input",{ref:"textInput",onBlur:e.onBlur,style:{width:"100%",outlineColor:"black",outlineStyle:"oinset"},type:"text",name:"name",value:e.state.value,onKeyUp:e.handleKey,onChange:e.handleChange})}),e.isFocus=!1,e.state={editing:!1,value:e.props.value},e}return e=s,(n=[{key:"componentDidUpdate",value:function(t,e){this.refs.textInput&&!this.isFocus&&(this.refs.textInput.focus(),this.isFocus=!0)}},{key:"shouldComponentUpdate",value:function(t,e){return t.value!=this.props.value&&(this.state.value=t.value),!0}},{key:"render",value:function(){return this.state.editing?this.renderEditor():this.renderDiv()}}])&&Xt(e.prototype,n),i&&Xt(e,i),s}();function Zt(t){"@babel/helpers - typeof";return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach(function(e){ne(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e,n){return e&&oe(t.prototype,e),n&&oe(t,n),t}function ae(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Zt(e)||"function"==typeof e))return e;return ue(t)}(this,n)}}function ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pe=function(t){ae(n,r["Component"]);var e=ce(n);function n(t){var r;return re(this,n),ne(ue(r=e.call(this,t)),"onChange",function(t){r.props.onUpdateTask&&r.props.onUpdateTask(r.props.item,{name:t})}),r}return ie(n,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"timeLine-side-task-row",style:ee(ee({},u.values.taskList.task.style),{},{top:this.props.top,height:this.props.itemheight}),onClick:function(e){return t.props.onSelectItem(t.props.item)}},this.props.nonEditable?o.a.createElement("div",{tabIndex:this.props.index,style:{width:"100%"}},this.props.label):o.a.createElement(Qt,{value:this.props.label,index:this.props.index,onChange:this.onChange}))}}]),n}(),fe=function(t){ae(n,r["Component"]);var e=ce(n);function n(t){var r;return re(this,n),ne(ue(r=e.call(this,t)),"doScroll",function(){r.props.onScroll(r.refs.taskViewPort.scrollTop)}),r}return ie(n,[{key:"getContainerStyle",value:function(t){return{height:t>0?t*this.props.itemheight:10}}},{key:"renderTaskRow",value:function(t){for(var e=[],n=this.props.startRow;n<this.props.endRow+1;n++){var r=t[n];if(!r)break;e.push(o.a.createElement(pe,{key:n,index:n,item:r,label:r.name,top:n*this.props.itemheight,itemheight:this.props.itemheight,isSelected:this.props.selectedItem==r,onUpdateTask:this.props.onUpdateTask,onSelectItem:this.props.onSelectItem,nonEditable:this.props.nonEditable}))}return e}},{key:"render",value:function(){var t=this.props.data?this.props.data:[];return this.containerStyle=this.getContainerStyle(t.length),o.a.createElement("div",{className:"timeLine-side"},o.a.createElement("div",{className:"timeLine-side-title",style:u.values.taskList.title.style},o.a.createElement("div",null,u.values.taskList.title.label)),o.a.createElement("div",{ref:"taskViewPort",className:"timeLine-side-task-viewPort",onScroll:this.doScroll},o.a.createElement("div",{className:"timeLine-side-task-container",style:this.containerStyle},this.renderTaskRow(t))))}}]),n}();function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var he=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,"initialise",function(t,n,r,o){e.nowposition=r,e.daywidth=o,e.setLimits(t,n,r,o),e.loadDataHorizon()}),de(this,"setStartEnd",function(t,n,r,o){e.nowposition=r,e.daywidth=o,e.needData(t,n)&&(e.setLimits(t,n),e.loadDataHorizon())}),de(this,"needData",function(t,n){return t<e.lower_data_limit||n>e.upper_data_limit}),de(this,"setLimits",function(t,n){e.lower_limit=t-1e3,e.lower_data_limit=t-750,e.upper_limit=n+1e3,e.upper_data_limit=n+750}),de(this,"loadDataHorizon",function(){var t=j.pixelToDate(e.lower_limit,e.nowposition,e.daywidth),n=j.pixelToDate(e.upper_limit,e.nowposition,e.daywidth);e.onHorizonChange(t,n)}),this.lower_limit=0,this.upper_limit=0,this._dataToRender=[]};n(11);function ye(t){"@babel/helpers - typeof";return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=ke(t);if(e){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;return we(t)}(this,n)}}function we(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(s,r["Component"]);var e,n,i,a=ve(s);function s(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),xe(we(e=a.call(this,t)),"onSize",function(t){e.calculateVerticalScrollVariables(t),e.initialise||(e.dc.initialise(e.state.scrollLeft+e.state.nowposition,e.state.scrollLeft+e.state.nowposition+t.width,e.state.nowposition,e.state.dayWidth),e.initialise=!0),e.setStartEnd();var n=Math.ceil(t.height/e.props.itemheight),r=e.calcNumVisibleDays(t),o=e.calculateStartEndRows(n,e.props.data,e.state.scrollTop);e.setState({numVisibleRows:n,numVisibleDays:r,startRow:o.start,endRow:o.end,size:t})}),xe(we(e),"verticalChange",function(t){if(t!=e.state.scrollTop){var n=e.calculateStartEndRows(e.state.numVisibleRows,e.props.data,t);n.start!==e.state.start&&e.setState({scrollTop:t,startRow:n.start,endRow:n.end})}}),xe(we(e),"calculateStartEndRows",function(t,n,r){var o=Math.trunc(r/e.props.itemheight);return{start:o,end:o+t>=n.length?n.length:o+t}}),xe(we(e),"setStartEnd",function(){e.dc.setStartEnd(e.state.scrollLeft,e.state.scrollLeft+e.state.size.width,e.state.nowposition,e.state.dayWidth)}),xe(we(e),"horizontalChange",function(t){var n=e.state.nowposition,r=-1,o=e.state.headerData,i=e.state.startRow,a=e.state.endRow;t>e.pxToScroll?(n=e.state.nowposition-e.pxToScroll,r=0):t<=0?(n=e.state.nowposition+e.pxToScroll,r=e.pxToScroll):r=t;var s=Math.trunc((t-e.state.nowposition)/e.state.dayWidth);a=(i=Math.trunc(e.state.scrollTop/e.props.itemheight))+e.state.numVisibleRows>=e.props.data.length?e.props.data.length-1:i+e.state.numVisibleRows,e.setStartEnd(),e.setState({currentday:s,nowposition:n,headerData:o,scrollLeft:r,startRow:i,endRow:a})}),xe(we(e),"calculateVerticalScrollVariables",function(t){e.pxToScroll=(1-t.width/k)*k-1}),xe(we(e),"onHorizonChange",function(t,n){e.props.onHorizonChange&&e.props.onHorizonChange(t,n)}),xe(we(e),"doMouseDown",function(t){e.dragging=!0,e.draggingPosition=t.clientX}),xe(we(e),"doMouseMove",function(t){if(e.dragging){var n=e.draggingPosition-t.clientX;0!==n&&(e.draggingPosition=t.clientX,e.horizontalChange(e.state.scrollLeft+n))}}),xe(we(e),"doMouseUp",function(t){e.dragging=!1}),xe(we(e),"doMouseLeave",function(t){e.dragging=!1}),xe(we(e),"doTouchStart",function(t){e.dragging=!0,e.draggingPosition=t.touches[0].clientX}),xe(we(e),"doTouchEnd",function(t){e.dragging=!1}),xe(we(e),"doTouchMove",function(t){if(e.dragging){var n=e.draggingPosition-t.touches[0].clientX;0!==n&&(e.draggingPosition=t.touches[0].clientX,e.horizontalChange(e.state.scrollLeft+n))}}),xe(we(e),"doTouchCancel",function(t){e.dragging=!1}),xe(we(e),"doMouseLeave",function(t){e.dragging=!1}),xe(we(e),"onTaskListSizing",function(t){e.setState(function(e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach(function(e){xe(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e);return n.sideStyle={width:n.sideStyle.width-t},n})}),xe(we(e),"onSelectItem",function(t){e.props.onSelectItem&&t!=e.props.selectedItem&&e.props.onSelectItem(t)}),xe(we(e),"onStartCreateLink",function(t,n){e.setState({interactiveMode:!0,taskToCreate:{task:t,position:n}})}),xe(we(e),"onFinishCreateLink",function(t,n){e.props.onCreateLink&&t&&e.state.taskToCreate&&e.state.taskToCreate.task.id!=t.id&&e.props.onCreateLink({start:e.state.taskToCreate,end:{task:t,position:n}}),e.setState({interactiveMode:!1,taskToCreate:null})}),xe(we(e),"onTaskChanging",function(t){e.setState({changingTask:t})}),xe(we(e),"calcNumVisibleDays",function(t){return Math.ceil(t.width/e.state.dayWidth)+w}),xe(we(e),"setStickyRow",function(t){e.setState({stickyRow:e.state.stickyRow==t?null:t})}),xe(we(e),"checkNeeeData",function(){if(e.props.data!=e.state.data){e.state.data=e.props.data;var t=e.calculateStartEndRows(e.state.numVisibleRows,e.props.data,e.state.scrollTop);e.state.startRow=t.start,e.state.endRow=t.end,bt.registerData(e.state.data)}e.props.links!=e.state.links&&(e.state.links=e.props.links,bt.registerLinks(e.props.links))}),e.dragging=!1,e.draggingPosition=0,e.dc=new he,e.dc.onHorizonChange=e.onHorizonChange,e.initialise=!1,e.pxToScroll=1900;var n=e.getDayWidth(e.props.mode);return u.load(e.props.config),e.state={currentday:0,nowposition:0,startRow:0,endRow:10,sideStyle:{width:200},scrollLeft:0,scrollTop:0,numVisibleRows:40,numVisibleDays:60,dayWidth:n,stickyRow:null,interactiveMode:!1,taskToCreate:null,links:[],mode:e.props.mode?e.props.mode:O,size:{width:1,height:1},changingTask:null},e}return e=s,(n=[{key:"getDayWidth",value:function(t){switch(t){case x:return 1440;case S:return 480;case O:return 24;case T:return 4;default:return 24}}},{key:"checkMode",value:function(){if(this.props.mode!=this.state.mode&&this.props.mode){this.state.mode=this.props.mode;var t=this.getDayWidth(this.state.mode);this.state.dayWidth=t,this.state.numVisibleDays=this.calcNumVisibleDays(this.state.size);var e=Math.ceil(-this.state.currentday*this.state.dayWidth/this.pxToScroll);this.state.nowposition=e*this.pxToScroll;var n=(this.state.currentday*this.state.dayWidth+this.state.nowposition)%this.pxToScroll;this.state.scrollLeft=n}}},{key:"render",value:function(){var t;return this.checkMode(),this.checkNeeeData(),this.state.size,o.a.createElement("div",{className:"timeLine"},o.a.createElement("div",{className:"timeLine-side-main",style:this.state.sideStyle},o.a.createElement(fe,{ref:"taskViewPort",itemheight:this.props.itemheight,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onScroll:this.verticalChange,nonEditable:this.props.nonEditableName}),o.a.createElement(m,{onTaskListSizing:this.onTaskListSizing})),o.a.createElement("div",{className:"timeLine-main"},o.a.createElement(A,{headerData:this.state.headerData,numVisibleDays:this.state.numVisibleDays,currentday:this.state.currentday,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,mode:this.state.mode,scrollLeft:this.state.scrollLeft}),o.a.createElement(yt,{ref:"dataViewPort",scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,itemheight:this.props.itemheight,nowposition:this.state.nowposition,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,dayWidth:this.state.dayWidth,onScroll:this.scrollData,stickyRow:this.state.stickyRow,setStickyRow:this.setStickyRow,onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.doMouseUp,onMouseLeave:this.doMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.doTouchEnd,onTouchCancel:this.doTouchCancel,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onTaskChanging:this.onTaskChanging,onStartCreateLink:this.onStartCreateLink,onFinishCreateLink:this.onFinishCreateLink,boundaries:{lower:this.state.scrollLeft,upper:this.state.scrollLeft+this.state.size.width},onSize:this.onSize}),o.a.createElement(Yt,(xe(t={scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,interactiveMode:this.state.interactiveMode,taskToCreate:this.state.taskToCreate,onFinishCreateLink:this.onFinishCreateLink,changingTask:this.state.changingTask,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,itemheight:this.props.itemheight},"onSelectItem",this.onSelectItem),xe(t,"links",this.props.links),t))))}}])&&be(e.prototype,n),i&&be(e,i),s}();Se.propTypes={itemheight:a.a.number.isRequired,dayWidth:a.a.number.isRequired,nonEditableName:a.a.bool},Se.defaultProps={itemheight:20,dayWidth:24,nonEditableName:!1};e.default=Se}])});